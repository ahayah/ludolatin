{% extends "base.html" %}

{% block body %}
<style>
  .topicPieContainer {
    width: 100px; height: 100px;
    transform: rotate(-90deg);
    background: #8ee000;
    border-radius: 50%;
    display: inline-block;
  }

  .topicPieLocked {
    width: 100px; height: 100px;
    background: #8b8b8b;
    border-radius: 50%;
    display: inline-block;
  }

  .topicPieComplete {
    width: 100px; height: 100px;
    background: #7ac70c;
    border-radius: 50%;
    display: inline-block;
  }

  .topicPie {
    fill: #8ee000;
    stroke: #7ac70c;
    stroke-width: 32;
    stroke-dasharray: {{ topic_progress }} 100;
  }

  .topicPie:hover {
    fill: #9efa00;
    stroke: #87de0d;
   }

  .topicPieComplete:hover {
    background: #87de0d
   }

  a:hover, a:visited, a:link, a:active {
    text-decoration: none;
  }
</style>

<div class="container">
  <h1>Dashboard</h1>
  <p class="lead">An empty dashboard.</p>
</div>

<div class="container">
  <div class="row">
    <div class="col-sm-7 card text-center">
      {% for topic in topics %}
        {% if topic.id < current_topic.id %}
          <div class="card-block">
            <a href="{{ url_for('topic.topic', id=topic.id) }}">
              <div width="32" height="32" class="topicPieComplete"></div>
              <br />
              {{ current_topic.name }}
            </a>
          </div>
        {% elif topic == current_topic %}
          <div class="card-block">
            <a href="{{ url_for('topic.topic', id=topic.id) }}">
              <!--https://www.smashingmagazine.com/2015/07/designing-simple-pie-charts-with-css/-->
              <svg class="topicPieContainer" viewBox="0 0 32 32">
                <circle class="topicPie" r="15.915" cx="15.915" cy="15.915" />
              </svg>
              <br />
              {{ topic.name }}
              {{ progress }} / {{ topic_size }}
            </a>
          </div>
        {% elif topic.id > current_topic.id %}
          <div class="card-block">
            <div width="32" height="32" class="topicPieLocked"></div>
            <br />
            {{ topic.name }}
            0 / {{ topic.quizzes|length }}
          </div>
        {% endif %}
      {% endfor %}
    </div><!-- /.blog-main -->

    <div class="col-sm-4 offset-sm-1">
      <div class="card">
        <div class="card-block">
          <h4 class="card-title">Progress</h4>
          <h6 class="card-subtitle mb-2 text-muted">Learning a language requires practice every day.</h6>
          <div class="dashboardXPChartContainer">
            <canvas id="xpChart" width="300" height="225"></canvas>
          </div>
        </div>
      </div>
    </div><!-- /.blog-sidebar -->
  </div><!-- /.row -->
</div><!-- /.container -->
{% endblock %}

{% block js %}
<script>
var labels = {{ days|tojson }};
var data = {{ daily }};
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
<script src="/static/js/progress_chart.js"></script>
<script>xpChart()</script>
{% endblock %}
